{"componentChunkName":"component---node-modules-gatsby-theme-garden-src-templates-local-file-js","path":"/Code Diary/Adding a new web service to Engager","result":{"data":{"file":{"childMdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"install-the-service\"\n  }, \"Install the service\"), mdx(\"p\", null, \"Pretty straightforward, do what the install page for the service wants. Note that if you want to do localhost connection over docker, since Engager's running some services bare metal and some on docker, you may need to use the  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--network host\"), \" flag in the docker run command if the app needs to communicate with the baremetal stuff, like Plex or Ombi. Only use it if you need to however.\"), mdx(\"h2\", {\n    \"id\": \"setup-the-dns-record-on-cloudflare\"\n  }, \"Setup the DNS record on Cloudflare\"), mdx(\"p\", null, \"Go \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://dash.cloudflare.com/98809caf7d48c435fa78742afaa38db1/rooday.com/dns\"\n  }, \"here\"), \" and add a new A record with the service name that points to Engager's IP. As of last update, it's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"108.49.72.59\"), \". But this will be on cloudflare anyways.\"), mdx(\"h2\", {\n    \"id\": \"setup-a-basic-nginx-config\"\n  }, \"Setup a basic nginx config\"), mdx(\"p\", null, \"Inside \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/nginx/sites-available\"), \", make a new file named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SERVICE_NAME.rooday.com\"), \" and populate the file with:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"server {\\n    server_name SERVICE_NAME.rooday.com;\\n    location / {\\n        proxy_pass http://127.0.0.1:PORT;\\n    }\\n}\\n\")), mdx(\"p\", null, \"This assumes that the service is running localhost on some port, but that's a safe assumption here.\"), mdx(\"p\", null, \"If a transparent proxy is needed, e.g. CSS/JS resources are failing to load as the browser is looking for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://127.0.0.1/RESOURCE\"), \", then add these lines:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"proxy_set_header Host $host;\\nproxy_set_header X-Real-IP $remote_addr;\\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\nproxy_set_header X-Forwarded-Proto $scheme;\\n\")), mdx(\"p\", null, \"After creating that file, enable it by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo ln -s /etc/nginx/sites-available/SERVICE_NAME.rooday.com /etc/nginx/sites-enabled/\"), \", then run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo systemctl restart nginx\"), \" so it's live.\"), mdx(\"h2\", {\n    \"id\": \"enable-ssl-through-lets-encrypt\"\n  }, \"Enable SSL through Let's Encrypt\"), mdx(\"p\", null, \"Once the site is live and accessible (necessary for this step), run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo certbot --nginx -d SERVICE_NAME.rooday.com\"), \" and Let's Encrypt will do the rest (make sure to select the option to redirect http traffic to https).\"), mdx(\"h2\", {\n    \"id\": \"thats-it\"\n  }, \"That's it!\"));\n}\n;\nMDXContent.isMDXComponent = true;","outboundReferences":[],"inboundReferences":[]},"fields":{"slug":"/Code Diary/Adding a new web service to Engager","title":"Adding a new web service to Engager"}}},"pageContext":{"id":"08d49f0c-7ae4-5631-b0bc-cae68126de00"}},"staticQueryHashes":["2098632890","2221750479","2468095761"]}